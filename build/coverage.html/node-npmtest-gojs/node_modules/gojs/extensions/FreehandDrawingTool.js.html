<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-gojs/node_modules/gojs/extensions/FreehandDrawingTool.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-gojs">npmtest-gojs (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-gojs/node_modules/gojs/extensions/FreehandDrawingTool.js</span></h1>
    <h2>
        
        Statements: <span class="metric">2.04% <small>(2 / 98)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 41)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 14)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">2.22% <small>(2 / 90)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-gojs/node_modules/gojs/extensions/</a> &#187; FreehandDrawingTool.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">"use strict";
/*
*  Copyright (C) 1998-2017 by Northwoods Software Corporation. All Rights Reserved.
*/
&nbsp;
// A custom Tool for freehand drawing
&nbsp;
/**
* @constructor
* @extends Tool
* @class
* This tool allows the user to draw a shape using the mouse.
* It collects all of the points from a mouse-down, all mouse-moves, until a mouse-up,
* and puts all of those points in a {@link Geometry} used by a {@link Shape}.
* It then adds a node data object to the diagram's model.
* &lt;p/&gt;
* This tool may be installed as the first mouse down tool:
* &lt;code&gt;myDiagram.toolManager.mouseDownTools.insertAt(0, new FreehandDrawingTool());&lt;/code&gt;
* &lt;p/&gt;
* The Shape used during the drawing operation can be customized by setting {@link #temporaryShape}.
* The node data added to the model can be customized by setting {@link #archetypePartData}.
*/
<span class="fstat-no" title="function not covered" >function FreehandDrawingTool() {</span>
<span class="cstat-no" title="statement not covered" >  go.Tool.call(this);</span>
<span class="cstat-no" title="statement not covered" >  this.name = "FreehandDrawing";</span>
<span class="cstat-no" title="statement not covered" >  this._archetypePartData = {}; </span>// the data to copy for a new polyline Part
<span class="cstat-no" title="statement not covered" >  this._isBackgroundOnly = true; </span>// affects canStart()
&nbsp;
  // this is the Shape that is shown during a drawing operation
<span class="cstat-no" title="statement not covered" >  this._temporaryShape = go.GraphObject.make(go.Shape, { name: "SHAPE", fill: null, strokeWidth: 1.5 });</span>
  // the Shape has to be inside a temporary Part that is used during the drawing operation
<span class="cstat-no" title="statement not covered" >  go.GraphObject.make(go.Part, { layerName: "Tool" }, this._temporaryShape);</span>
}
go.Diagram.inherit(FreehandDrawingTool, go.Tool);
&nbsp;
/**
* Only start if the diagram is modifiable and allows insertions.
* OPTIONAL: if the user is starting in the diagram's background, not over an existing Part.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.canStart = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  if (!this.isEnabled) <span class="cstat-no" title="statement not covered" >return false;</span></span>
<span class="cstat-no" title="statement not covered" >  var diagram = this.diagram;</span>
<span class="cstat-no" title="statement not covered" >  if (diagram === null || diagram.isReadOnly || diagram.isModelReadOnly) <span class="cstat-no" title="statement not covered" >return false;</span></span>
<span class="cstat-no" title="statement not covered" >  if (!diagram.allowInsert) <span class="cstat-no" title="statement not covered" >return false;</span></span>
  // don't include the following check when this tool is running modally
<span class="cstat-no" title="statement not covered" >  if (diagram.currentTool !== this &amp;&amp; this.isBackgroundOnly) {</span>
    // only operates in the background, not on some Part
<span class="cstat-no" title="statement not covered" >    var part = diagram.findPartAt(diagram.lastInput.documentPoint, true);</span>
<span class="cstat-no" title="statement not covered" >    if (part !== null) <span class="cstat-no" title="statement not covered" >return false;</span></span>
  }
<span class="cstat-no" title="statement not covered" >  return true;</span>
};
&nbsp;
/**
* Capture the mouse and use a "crosshair" cursor.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.doActivate = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  go.Tool.prototype.doActivate.call(this);</span>
<span class="cstat-no" title="statement not covered" >  this.diagram.isMouseCaptured = true;</span>
<span class="cstat-no" title="statement not covered" >  this.diagram.currentCursor = "crosshair";</span>
};
&nbsp;
/**
* Cleanup.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.doDeactivate = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  go.Tool.prototype.doDeactivate.call(this);</span>
<span class="cstat-no" title="statement not covered" >  if (this.temporaryShape !== null) {</span>
<span class="cstat-no" title="statement not covered" >    this.diagram.remove(this.temporaryShape.part);</span>
  }
<span class="cstat-no" title="statement not covered" >  this.diagram.currentCursor = "";</span>
<span class="cstat-no" title="statement not covered" >  this.diagram.isMouseCaptured = false;</span>
};
&nbsp;
/**
* This adds a Point to the {@link #temporaryShape}'s geometry.
* &lt;p/&gt;
* If the Shape is not yet in the Diagram, its geometry is initialized and
* its parent Part is added to the Diagram.
* &lt;p/&gt;
* If the point is less than half a pixel away from the previous point, it is ignored.
* @this {FreehandDrawingTool}
* @param {Point} p
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.addPoint = <span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >  var shape = this.temporaryShape;</span>
<span class="cstat-no" title="statement not covered" >  if (shape === null) <span class="cstat-no" title="statement not covered" >return;</span></span>
&nbsp;
  // for the temporary Shape, normalize the geometry to be in the viewport
<span class="cstat-no" title="statement not covered" >  var viewpt = this.diagram.viewportBounds.position;</span>
<span class="cstat-no" title="statement not covered" >  var q = new go.Point(p.x-viewpt.x, p.y-viewpt.y);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var part = shape.part;</span>
<span class="cstat-no" title="statement not covered" >  if (part.diagram === null) {</span>
<span class="cstat-no" title="statement not covered" >    var fig = new go.PathFigure(q.x, q.y, true); </span> // possibly filled, depending on Shape.fill
<span class="cstat-no" title="statement not covered" >    var geo = new go.Geometry().add(fig); </span> // the Shape.geometry consists of a single PathFigure
<span class="cstat-no" title="statement not covered" >    this.temporaryShape.geometry = geo;</span>
<span class="cstat-no" title="statement not covered" >    part.position = viewpt; </span> // position the Shape's Part
<span class="cstat-no" title="statement not covered" >    this.diagram.add(part);</span>
  }
&nbsp;
  // only add a point if it isn't too close to the last one
<span class="cstat-no" title="statement not covered" >  var segs = shape.geometry.figures.first().segments;</span>
<span class="cstat-no" title="statement not covered" >  var idx = segs.count-1;</span>
<span class="cstat-no" title="statement not covered" >  if (idx &gt;= 0) {</span>
<span class="cstat-no" title="statement not covered" >    var last = segs.elt(idx);</span>
<span class="cstat-no" title="statement not covered" >    if (Math.abs(q.x - last.endX) &lt; 0.5 &amp;&amp; Math.abs(q.y - last.endY) &lt; 0.5) <span class="cstat-no" title="statement not covered" >return;</span></span>
  }
&nbsp;
  // must copy whole Geometry in order to add a PathSegment
<span class="cstat-no" title="statement not covered" >  var geo = shape.geometry.copy();</span>
<span class="cstat-no" title="statement not covered" >  var fig = geo.figures.first();</span>
<span class="cstat-no" title="statement not covered" >  var seg = new go.PathSegment(go.PathSegment.Line, q.x, q.y);</span>
<span class="cstat-no" title="statement not covered" >  fig.add(seg);</span>
<span class="cstat-no" title="statement not covered" >  shape.geometry = geo;</span>
};
&nbsp;
/**
* Start drawing the line by starting to accumulate points in the {@link #temporaryShape}'s geometry.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.doMouseDown = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  if (!this.isActive) {</span>
<span class="cstat-no" title="statement not covered" >    this.doActivate();</span>
    // the first point
<span class="cstat-no" title="statement not covered" >    this.addPoint(this.diagram.lastInput.documentPoint);</span>
  }
};
&nbsp;
/**
* Keep accumulating points in the {@link #temporaryShape}'s geometry.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.doMouseMove = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  if (this.isActive) {</span>
<span class="cstat-no" title="statement not covered" >    this.addPoint(this.diagram.lastInput.documentPoint);</span>
  }
};
&nbsp;
/**
* Finish drawing the line by adding a node data object holding the
* geometry string and the node position that the node template can bind to.
* This copies the {@link #archetypePartData} and adds it to the model.
* @this {FreehandDrawingTool}
*/
<span class="cstat-no" title="statement not covered" >FreehandDrawingTool.prototype.doMouseUp = <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  var started = false;</span>
<span class="cstat-no" title="statement not covered" >  if (this.isActive) {</span>
<span class="cstat-no" title="statement not covered" >    started = true;</span>
<span class="cstat-no" title="statement not covered" >    var diagram = this.diagram;</span>
    // the last point
<span class="cstat-no" title="statement not covered" >    this.addPoint(diagram.lastInput.documentPoint);</span>
    // normalize geometry and node position
<span class="cstat-no" title="statement not covered" >    var viewpt = diagram.viewportBounds.position;</span>
<span class="cstat-no" title="statement not covered" >    var geo = this.temporaryShape.geometry.copy();</span>
<span class="cstat-no" title="statement not covered" >    var pos = geo.normalize();</span>
<span class="cstat-no" title="statement not covered" >    pos.x = viewpt.x - pos.x;</span>
<span class="cstat-no" title="statement not covered" >    pos.y = viewpt.y - pos.y;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    diagram.startTransaction(this.name);</span>
    // create the node data for the model
<span class="cstat-no" title="statement not covered" >    var d = diagram.model.copyNodeData(this.archetypePartData);</span>
    // adding data to model creates the actual Part
<span class="cstat-no" title="statement not covered" >    diagram.model.addNodeData(d);</span>
<span class="cstat-no" title="statement not covered" >    var part = diagram.findPartForData(d);</span>
    // assign the location
<span class="cstat-no" title="statement not covered" >    part.location = new go.Point(pos.x + geo.bounds.width/2, pos.y + geo.bounds.height/2);</span>
    // assign the Shape.geometry
<span class="cstat-no" title="statement not covered" >    var shape = part.findObject("SHAPE");</span>
<span class="cstat-no" title="statement not covered" >    if (shape !== null) <span class="cstat-no" title="statement not covered" >shape.geometry = geo;</span></span>
  }
<span class="cstat-no" title="statement not covered" >  this.stopTool();</span>
<span class="cstat-no" title="statement not covered" >  if (started) <span class="cstat-no" title="statement not covered" >diagram.commitTransaction(this.name);</span></span>
};
&nbsp;
// Public properties
&nbsp;
/**
* Gets or sets the Shape that is used to hold the line as it is being drawn.
* The default value is a simple Shape drawing an unfilled open thin black line.
* @name FreehandDrawingTool#temporaryShape
* @function.
* @return {Shape}
*/
<span class="cstat-no" title="statement not covered" >Object.defineProperty(FreehandDrawingTool.prototype, "temporaryShape", {</span>
  get: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return this._temporaryShape; </span>},
  set: <span class="fstat-no" title="function not covered" >function(val) {</span>
<span class="cstat-no" title="statement not covered" >    if (this._temporaryShape !== val &amp;&amp; val !== null) {</span>
<span class="cstat-no" title="statement not covered" >      val.name = "SHAPE";</span>
<span class="cstat-no" title="statement not covered" >      var panel = this._temporaryShape.panel;</span>
<span class="cstat-no" title="statement not covered" >      panel.remove(this._temporaryShape);</span>
<span class="cstat-no" title="statement not covered" >      this._temporaryShape = val;</span>
<span class="cstat-no" title="statement not covered" >      panel.add(this._temporaryShape);</span>
    }
  }
});
&nbsp;
/**
* Gets or sets the node data object that is copied and added to the model
* when the freehand drawing operation completes.
* @name FreehandDrawingTool#archetypePartData
* @function.
* @return {Object}
*/
<span class="cstat-no" title="statement not covered" >Object.defineProperty(FreehandDrawingTool.prototype, "archetypePartData", {</span>
  get: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return this._archetypePartData; </span>},
  set: <span class="fstat-no" title="function not covered" >function(val) {</span> <span class="cstat-no" title="statement not covered" >this._archetypePartData = val; </span>}
});
&nbsp;
/**
* Gets or sets whether this tool can only run if the user starts in the diagram's background
* rather than on top of an existing Part.
* The default value is true.
* @name FreehandDrawingTool#isBackgroundOnly
* @function.
* @return {Object}
*/
<span class="cstat-no" title="statement not covered" >Object.defineProperty(FreehandDrawingTool.prototype, "isBackgroundOnly", {</span>
  get: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return this._isBackgroundOnly; </span>},
  set: <span class="fstat-no" title="function not covered" >function(val) {</span> <span class="cstat-no" title="statement not covered" >this._isBackgroundOnly = val; </span>}
});
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 14:09:12 GMT+0000 (UTC)</div>
</div>
</body>
</html>
